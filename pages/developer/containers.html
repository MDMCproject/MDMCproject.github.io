

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Containers &mdash; MDMC 0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Debugging inside Containers" href="vscode.html" />
    <link rel="prev" title="MDMC Software Management" href="management.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> MDMC
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulations.html">3. Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameter-refinement.html">4. Parameter Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">5. Contributing to MDMC</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/building-a-universe.html">Building an MDMC Universe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/read-configurations.html">Reading atoms from configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/units.html">Units in MDMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/applying-a-forcefield.html">Applying a <code class="docutils literal notranslate"><span class="pre">ForceField</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/solvating-a-universe.html">Solvating an MDMC Universe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/molecular-visualization.html">Molecular Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/running-a-simulation.html">Running a Simulation in MDMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/creating-an-observable.html">Creating an Observable from a Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/selecting-fitting-parameters.html">Selecting Fitting Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/running-a-refinement.html">Running a Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/Argon-a-to-z.html">Argon A-to-Z</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_standards.html">Coding Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="management.html">MDMC Software Management</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Containers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-are-containers-and-why-do-we-use-them">What are containers and why do we use them?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-docker-image">The Docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-docker-image">Building the Docker image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vscode.html">Debugging inside Containers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/common.html">common</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/control.html">control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/gui.html">gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/md.html">MD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/readers.html">readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/refinement.html">refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/trajectory_analysis.html">trajectory_analysis</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MDMC</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Containers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/pages/developer/containers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="containers">
<span id="dev-doc-container-label"></span><h1>Containers<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-are-containers-and-why-do-we-use-them">
<h2>What are containers and why do we use them?<a class="headerlink" href="#what-are-containers-and-why-do-we-use-them" title="Permalink to this headline">¶</a></h2>
<p>You can find a lot of information about containers on the internet, which may be overwhelming. Here containers are explained, in very simple terms, by an analogy, and in the context of how we use containers. Say our software is a hamster, and other people would like to have our hamster in their house. However, letting a hamster loose in an arbitrary house can cause problems!</p>
<p>We have two options. Either:</p>
<blockquote>
<div><ul class="simple">
<li><p>attempt to train the hamster to behave properly in any given house. Or;</p></li>
<li><p>build a tiny house (a hamster cage), which contains everything the hamster needs to live and function well (water, the correct food, etc.) and give anyone who wants the hamster the hamster <em>and</em> its cage, so the hamster will be in the same conditions no matter who’s house it’s in.</p></li>
</ul>
</div></blockquote>
<p>The container is the hamster cage; a sort of ‘mini computer inside the computer’. For MDMC in particular, this container runs an appropriate Linux environment and contains all our dependency software (such as Python, various libraries, and molecular dynamics engine). An example of why we use containers is because the molecular dynamics engine (LAMMPS) can be complex to install for an arbitrary user, and with the settings and version needed by MDMC. By using a container, we can develop MDMC exclusively for one environment, while still having it function as intended on other environments/operating systems.</p>
<p>A container ‘image’ (see the next section) is a blueprint that the container software uses to build a container. When you use MDMC in a container, the docker-compose file is pulling a copy of the container image from the internet and uses it to create the container for MDMC on your machine.</p>
</div>
<div class="section" id="the-docker-image">
<h2>The Docker image<a class="headerlink" href="#the-docker-image" title="Permalink to this headline">¶</a></h2>
<p>The ‘regular’ way that users can access MDMC is via <a class="reference external" href="https://www.docker.com/">Docker</a> . The Docker container also lies at the core of our Singularity container; the Singularity container is built from the Docker image. This is mainly for ease of development, as we only need to update one image.</p>
<p>Our Docker image is on Docker Hub as <code class="docutils literal notranslate"><span class="pre">mdmc/mdmc</span></code>. We use three tags for development (as of this writing):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mdmc/mdmc:latest</span></code>; the version is used by e.g. docker-compose to install MDMC. This is the ‘production’ image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mdmc/mdmc:experimental</span></code>; if you are making manual changes to the image, it’s useful to push it to this tag so you can swap it in and out vs other images, as well as let other developers and Travis use it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mdmc/mdmc:travis</span></code>; when Travis CI automatically builds a new image (see below), it is pushed to this tag.</p></li>
</ul>
</div>
<div class="section" id="building-the-docker-image">
<h2>Building the Docker image<a class="headerlink" href="#building-the-docker-image" title="Permalink to this headline">¶</a></h2>
<p>As just mentioned, Travis CI, our testing and continuous integration service, automatically builds and tests new images. It does so ONLY IF files in the <code class="docutils literal notranslate"><span class="pre">/build/Docker</span></code> directory are changed, or if <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> is changed. In this case, the pull request testing will automatically detect these changes, rebuild the image from the Dockerfile, test it, and then push it to <code class="docutils literal notranslate"><span class="pre">mdmc/mdmc:travis</span></code>. The mdmc/mdmc:travis image can then be pushed to the mdmc/mdmc:latest when required.</p>
<p>If you need to rebuild the Docker image manually, go to the main directory for the source code then execute the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker build -t mdmc/mdmc:experimental -f ./build/Docker/Dockerfile .
</pre></div>
</div>
<p>which will build the image and give it the tag mdmc/mdmc:experimental. Note that to push it to Docker hub, you need to be logged in as the mdmc user.</p>
<p>Please do not rebuild the Docker container using command line arguments (add them to the Dockerfile instead) or rebuild the container without updating the Dockerfile in the repository. This can cause issues and unintended behaviour, as well as making the container non-reproducible by others.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="vscode.html" class="btn btn-neutral float-right" title="Debugging inside Containers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="management.html" class="btn btn-neutral float-left" title="MDMC Software Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>