<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Control &mdash; MDMC 0.2 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="gui" href="../gui.html" />
    <link rel="prev" title="control" href="../control.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> MDMC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simulations.html">3. Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parameter-refinement.html">4. Parameter Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">5. Contributing to MDMC</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/building-a-universe.html">Building an MDMC Universe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/read-configurations.html">Reading atoms from configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/units.html">Units in MDMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/applying-a-forcefield.html">Applying a <code class="docutils literal notranslate"><span class="pre">ForceField</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/solvating-a-universe.html">Solvating an MDMC Universe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/molecular-visualization.html">Molecular Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/running-a-simulation.html">Running a Simulation in MDMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/creating-an-observable.html">Creating an Observable from a Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/selecting-fitting-parameters.html">Selecting Fitting Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/running-a-refinement.html">Running a Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/Argon-a-to-z.html">Argon A-to-Z</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/coding_standards.html">Coding Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/documentation.html">Documentation Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/management.html">MDMC Software Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/vscode.html">Debugging inside Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/recipes.html">Recipes for ‘simple’ additions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/known_bugs.html">Known bugs and unimplemented features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../common.html">common</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../control.html">control</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gui.html">gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../md.html">MD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readers.html">readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refinement.html">refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trajectory_analysis.html">trajectory_analysis</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">MDMC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../control.html">control</a> &raquo;</li>
      <li>Control</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/pages/modules/control/control.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-MDMC.control.control">
<span id="control"></span><h1>Control<a class="headerlink" href="#module-MDMC.control.control" title="Permalink to this headline"></a></h1>
<p>A module for performing the refinement</p>
<dl class="py class">
<dt class="sig sig-object py" id="MDMC.control.control.Control">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MDMC.control.control.</span></span><span class="sig-name descname"><span class="pre">Control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">simulation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../md/simulation.html#MDMC.MD.simulation.Simulation" title="MDMC.MD.simulation.Simulation"><span class="pre">MDMC.MD.simulation.Simulation</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exp_datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../md/parameters.html#MDMC.MD.parameters.Parameters" title="MDMC.MD.parameters.Parameters"><span class="pre">MDMC.MD.parameters.Parameters</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimizer_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'MMC'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FoM_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MD_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">equilibration_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convergence_tol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_refinement_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_parameter_change</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">settings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/MDMC/control/control.html#Control"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MDMC.control.control.Control" title="Permalink to this definition"></a></dt>
<dd><p>Controls the MDMC refinement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>simulation</strong> (<a class="reference internal" href="../md/simulation.html#MDMC.MD.simulation.Simulation" title="MDMC.MD.simulation.Simulation"><em>Simulation</em></a>) – Performs a simulation for a given set of potential <code class="docutils literal notranslate"><span class="pre">Parameter</span></code>
objects.</p></li>
<li><p><strong>exp_datasets</strong> (<em>list of dicts</em>) – <p>Each <cite>dict</cite> represents an experimental dataset, containing the
following keys:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">file_name</span></code> (<cite>str</cite>) the file name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> (<cite>str</cite>) the type of observable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reader</span></code> (<cite>str</cite>) the reader required for the file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weighting</span></code> (<cite>float</cite>) the weighting of the dataset to be used in
the Figure of Merit calculation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resolution</span></code> : (<cite>dict</cite>, but can be <cite>str</cite>, <cite>float</cite>, or None)
Should be a one-line dict of format {‘file’ : str} or {key : float}
if {‘file’ : str}, the str should be a file in
the same format as <code class="docutils literal notranslate"><span class="pre">file_name</span></code> containing results of a vanadium
sample which is used to determine instrument energy resolution for
this dataset.
If {key : float}, the key should be the type of resolution function.
allowed types are ‘gaussian’ and ‘lorentzian’
Can also be ‘lazily’ given as just a <cite>str</cite> or <cite>float</cite>.
If just a string is given, it is assumed to be a filename.
If just a float is given, it is assumed to be Gaussian.
The float should be the instrument energy resolution as the FWHM in <code class="docutils literal notranslate"><span class="pre">ueV</span></code> (micro eV).
If you have already accounted for instrument resolution in your dataset,
this field can be set to None, and resolution application will be skipped.
This must be done explicitly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rescale_factor</span></code> (<cite>float</cite>, optional, defaults to <cite>1.</cite>) applied to
the experimental data when calculating the FoM to ensure it is on
the same scale as the calculated observable</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto_scale</span></code> (<cite>bool</cite>, optional, defaults to <cite>False</cite>) set the
<code class="docutils literal notranslate"><span class="pre">rescale_factor</span></code> automatically to minimise the FoM, if both
<code class="docutils literal notranslate"><span class="pre">rescale_factor</span></code> and <code class="docutils literal notranslate"><span class="pre">auto_scale</span></code> are provided then a warning
is printed and <code class="docutils literal notranslate"><span class="pre">auto_scale</span></code> takes precedence</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_FFT</span></code> (<cite>bool</cite>, optional, defaults to <cite>True</cite>) whether to use
Fast Fourier Transforms in the calculation of dependent variables.
FFT speeds up calculation but places restrictions on spacing in the
independent variable domain(s). This option may not be supported
for all <a href="#id1"><span class="problematic" id="id2">``</span></a>Observable``s</p></li>
</ul>
</div></blockquote>
<p>Note that the default (and preferred) behaviour of the scaling settings requires that the
dataset provided has been properly scaled and normalised for the refinement process.
Arbitrary or automatic rescaling should be undertaken with care, as it does not take into
account any physical aspects of scaling the data, such as the presence or absence of
background events from peaks outside its range.</p>
</p></li>
<li><p><strong>fit_parameters</strong> (<a class="reference internal" href="../md/parameters.html#MDMC.MD.parameters.Parameters" title="MDMC.MD.parameters.Parameters"><em>Parameters</em></a><em>, </em><em>list of Parameter</em>) – All parameters which will be refined. Note that any <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> that is <code class="docutils literal notranslate"><span class="pre">fixed</span></code>,
<code class="docutils literal notranslate"><span class="pre">tied</span></code> or equal to 0 will not be passed to the minimizer as these cannot be refined.
Those with <code class="docutils literal notranslate"><span class="pre">constraints</span></code> set are still passed.</p></li>
<li><p><strong>minimizer_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – The <code class="docutils literal notranslate"><span class="pre">Minimizer</span></code> type. Default is ‘MMC’.</p></li>
<li><p><strong>FoM_options</strong> (<em>dict of {str : str}</em><em>, </em><em>optional</em>) – <p>Defines the details of the <code class="docutils literal notranslate"><span class="pre">FigureOfMeritCalculator</span></code> to use. Default is <cite>None</cite>, in which
case the first option for each of the following keys is used:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">errors</span></code> {‘exp’, ‘none’} Whether to weight the differences between MD and
experimental data with the experimental error or not (errors from MD are not currently
supported).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">norm</span></code> {‘data_points’, ‘dof’, ‘none’} How to normalise the FoM, either by the total
number of data_points (n), the degrees of freedom (n - m, where m is the number of
parameters being varied), or not at all.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>reset_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Determines if the configuration is reset to the end of the last accepted
state. Default is <cite>True</cite>.</p></li>
<li><p><strong>max_parameter_change</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum factor by which a Parameter can change each step of the
refinement. Defaults to <cite>0.01</cite></p></li>
<li><p><strong>MD_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Number of molecular dynamics steps for each step of the refinement.
When not provided, the minimum number of steps needed for successful
calculation of the observables is used. If provided, the actual number
of steps may be reduced to prevent running MD that won’t be used when
calculating dependent variables. Default is <cite>None</cite>.</p></li>
<li><p><strong>equilibration_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – Number of molecular dynamics steps used to equilibrate the <code class="docutils literal notranslate"><span class="pre">Universe</span></code> in between each
refinement step. When changes to the <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> are small, this equilibration can be
much shorter than the equilibration needed before starting the refinement process, but in
general will vary depending on the details of the <code class="docutils literal notranslate"><span class="pre">Universe</span></code> and <code class="docutils literal notranslate"><span class="pre">Parameters</span></code>. Default
is 0.</p></li>
<li><p><strong>convergence_tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – The relative tolerance used to determine if a refinement has converged.
If the Figure of Merit and all <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> change less than this
tolerance between two accepted refinement steps, the refinement stops.
Default value is 1e-5.</p></li>
<li><p><strong>min_refinement_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – <blockquote>
<div><dl class="simple">
<dt>The minimum number of refinement steps before the refinement process can stop</dt><dd><p>if all parameters and the Figure of Merit have converged. Default value is 2.</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>cont_slicing<span class="classifier">bool, optional</span></dt><dd><p>Flag to decide between two possible behaviours when the number of <code class="docutils literal notranslate"><span class="pre">MD_steps</span></code> is
larger than the minimum required to calculate the observables. If <code class="docutils literal notranslate"><span class="pre">False</span></code> (default) then
the <code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> is sliced into non-overlapping sub-<code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> blocks for each of
which the observable is calculated. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the <code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> is sliced into
as many non-identical sub-<code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> blocks as possible (with overlap allowed).</p>
</dd>
</dl>
</p></li>
<li><p><strong>use_average</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Optional parameter relevant in case <code class="docutils literal notranslate"><span class="pre">MD_steps</span></code> is larger than the minimum required
and the MD <code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> is sliced into sub-<code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> blocks. If <code class="docutils literal notranslate"><span class="pre">True</span></code> (
default) the observables are averaged over the sub-<code class="docutils literal notranslate"><span class="pre">Trajectory</span></code> blocks. If <code class="docutils literal notranslate"><span class="pre">False</span></code>
they are not averaged.</p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – The level of verbosity:
Verbose level 0 gives no information.
Verbose level 1 gives final time for the whole method.
Verbose level 2 gives final time and also a progress bar.
Verbose level 3 gives final time, a progress bar, and time per step.</p></li>
<li><p><strong>**settings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a><em>, </em><em>optional</em>) – Settings to be passed into other functions, e.g. MC_norm=1 for MC optimiser if MMC
minimiser is used.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>An example of an exp_dataset list is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;file_name&#39;</span><span class="p">:</span><span class="n">data</span><span class="o">.</span><span class="n">LAMP_SQW_FILE</span><span class="p">,</span>
  <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;SQw&#39;</span><span class="p">,</span>
  <span class="s1">&#39;reader&#39;</span><span class="p">:</span><span class="s1">&#39;LAMPSQw&#39;</span><span class="p">,</span>
  <span class="s1">&#39;weight&#39;</span><span class="p">:</span><span class="mf">1.</span><span class="p">,</span>
  <span class="s1">&#39;resolution&#39;</span><span class="p">:{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span><span class="n">data</span><span class="o">.</span><span class="n">LAMP_SQW_VAN_FILE</span><span class="p">}</span>
  <span class="s1">&#39;rescale_factor&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;file_name:data.ANOTHER_FILE&#39;</span><span class="p">,</span>
  <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;FQt&#39;</span><span class="p">,</span>
  <span class="s1">&#39;reader&#39;</span><span class="p">:</span><span class="s1">&#39;GENERIC_READER&#39;</span><span class="p">,</span>
  <span class="s1">&#39;weight&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
  <span class="s1">&#39;resolution&#39;</span><span class="p">:{</span><span class="s1">&#39;gaussian&#39;</span><span class="p">:</span><span class="mf">2.35</span><span class="p">}</span>
  <span class="s1">&#39;auto_scale&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}]</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.simulation">
<span class="sig-name descname"><span class="pre">simulation</span></span><a class="headerlink" href="#MDMC.control.control.Control.simulation" title="Permalink to this definition"></a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">Simulation</span></code> on which is used to perform the refinement</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../md/simulation.html#MDMC.MD.simulation.Simulation" title="MDMC.MD.simulation.Simulation">Simulation</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.exp_datasets">
<span class="sig-name descname"><span class="pre">exp_datasets</span></span><a class="headerlink" href="#MDMC.control.control.Control.exp_datasets" title="Permalink to this definition"></a></dt>
<dd><p>One <cite>dict</cite> per experimental dataset used for the refinement</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><cite>list of dicts</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.fit_parameters">
<span class="sig-name descname"><span class="pre">fit_parameters</span></span><a class="headerlink" href="#MDMC.control.control.Control.fit_parameters" title="Permalink to this definition"></a></dt>
<dd><p>All <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> objects which will be refined</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../md/parameters.html#MDMC.MD.parameters.Parameters" title="MDMC.MD.parameters.Parameters">Parameters</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.minimizer">
<span class="sig-name descname"><span class="pre">minimizer</span></span><a class="headerlink" href="#MDMC.control.control.Control.minimizer" title="Permalink to this definition"></a></dt>
<dd><p>Refines the potential parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Minimizer</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.observable_pairs">
<span class="sig-name descname"><span class="pre">observable_pairs</span></span><a class="headerlink" href="#MDMC.control.control.Control.observable_pairs" title="Permalink to this definition"></a></dt>
<dd><p>Experimental observable/MD observable pairs which are used to calculate
the Figure of Merit</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><cite>list</cite> of <code class="docutils literal notranslate"><span class="pre">ObservablePairs</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.FoM_calculator">
<span class="sig-name descname"><span class="pre">FoM_calculator</span></span><a class="headerlink" href="#MDMC.control.control.Control.FoM_calculator" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the FoM <cite>float</cite> from the <code class="docutils literal notranslate"><span class="pre">observable_pairs</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>FigureOfMeritCalculator</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MDMC.control.control.Control.MD_steps">
<span class="sig-name descname"><span class="pre">MD_steps</span></span><a class="headerlink" href="#MDMC.control.control.Control.MD_steps" title="Permalink to this definition"></a></dt>
<dd><p>Number of molecular dynamics steps for each step of the refinement</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><cite>int</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MDMC.control.control.Control.equilibrate">
<span class="sig-name descname"><span class="pre">equilibrate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/MDMC/control/control.html#Control.equilibrate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MDMC.control.control.Control.equilibrate" title="Permalink to this definition"></a></dt>
<dd><p>Run molecular dynamics to equilibrate the <code class="docutils literal notranslate"><span class="pre">Universe</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MDMC.control.control.Control.refine">
<span class="sig-name descname"><span class="pre">refine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/MDMC/control/control.html#Control.refine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MDMC.control.control.Control.refine" title="Permalink to this definition"></a></dt>
<dd><p>Refines the specified potential parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – maximum number of steps for the refinement</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Perform a refinement with a maximum of 100 steps:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p>control.refine(100)</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MDMC.control.control.Control.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/MDMC/control/control.html#Control.step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MDMC.control.control.Control.step" title="Permalink to this definition"></a></dt>
<dd><p>Do a full step: generate and run MD to calculate FoM for existing
parameters, iterate parameters a step forward and reset MD (phasespace)
if previous step was rejected and reset_config = true</p>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../control.html" class="btn btn-neutral float-left" title="control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../gui.html" class="btn btn-neutral float-right" title="gui" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>