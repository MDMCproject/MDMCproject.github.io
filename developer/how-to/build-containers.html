

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building the Docker image &mdash; MDMC 0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=10f1778b"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using units" href="units.html" />
    <link rel="prev" title="Github" href="../explanation/management.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            MDMC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">2. Contributing to MDMC</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/Argon-a-to-z.html">Argon A-to-Z</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/equilibrating-a-simulation.html">Equilibrating simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/running-a-refinement.html">Running a Refinement (in detail)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/understanding-units.html">Understanding scientific units in MDMC</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How-to</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/use-MDMC.html">How to use MDMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/installation.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/api/modules.html">MDMC</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Explanation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../explanation/explanation.html">Explanation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../overview.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../explanation/coding_standards.html">Coding Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/containers.html">Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/diataxis.html">Diátaxis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/management.html">Github</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building the Docker image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Building the Docker image</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="units.html">Using units</a></li>
<li class="toctree-l2"><a class="reference internal" href="vscode.html">Debugging inside Containers</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MDMC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../overview.html">Developer Documentation</a></li>
      <li class="breadcrumb-item active">Building the Docker image</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developer/how-to/build-containers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="building-the-docker-image">
<h1>Building the Docker image<a class="headerlink" href="#building-the-docker-image" title="Link to this heading"></a></h1>
<section id="id1">
<h2>Building the Docker image<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>Github Actions automatically builds and tests new Docker images for MDMC.
It does so ONLY IF files in the <code class="docutils literal notranslate"><span class="pre">/build/Docker</span></code> directory are changed,
or if <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> is changed. In this case, the pull request testing will
automatically detect these changes, rebuild the image from the Dockerfile,
test it, and then push it to <code class="docutils literal notranslate"><span class="pre">mdmc/mdmc:ci-[branch]</span></code> where <code class="docutils literal notranslate"><span class="pre">[branch]</span></code>
is the name of the branch the image was built on. Note that the ‘slow’ build stage,
the <code class="docutils literal notranslate"><span class="pre">mdmc/engines</span></code> image, is only built if its Dockerfile is changed.</p>
<p>If you need to rebuild the Docker image manually, go to the main directory for the source code then execute the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>mdmc/mdmc:experimental<span class="w"> </span>-f<span class="w"> </span>./build/Docker/Dockerfile<span class="w"> </span>.
</pre></div>
</div>
<p>which will build the image and give it the tag mdmc/mdmc:experimental.
Note that to push it to Docker hub, you need to be logged in as the mdmc user.</p>
<p>Please do not rebuild the Docker container using command line arguments
(add them to the Dockerfile instead) or rebuild the container without
updating the Dockerfile in the repository. This can cause issues and
unintended behaviour, as well as making the container non-reproducible by others.</p>
<p>To push the Dockerhub experimental image to latest, do the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>mdmc/mdmc:experimental
docker<span class="w"> </span>tag<span class="w"> </span>mdmc/mdmc:experimental<span class="w"> </span>mdmc/mdmc:latest
docker<span class="w"> </span>push<span class="w"> </span>mdmc/mdmc:latest
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../explanation/management.html" class="btn btn-neutral float-left" title="Github" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="units.html" class="btn btn-neutral float-right" title="Using units" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>